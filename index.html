<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no"
    />
    <title>Our Love Story</title>
    <!--Loading beautiful fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Caveat:wght@600&family=Nunito:wght@300&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        /* Responsive card size */
        --card-width: clamp(260px, 70vw, 320px);
        --card-height: calc(var(--card-width) * 1.3);
      }

      body {
        margin: 0;
        height: 100vh;
        overflow: hidden; /* Prevent scrolling */
        font-family: "Nunito", sans-serif;
        -webkit-user-select: none;
        user-select: none;
        background-color: #2b0b3a; /* Base color */
      }

      /* --- Floating Words & Hearts Background --- */
      .animated-background {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 0;
        overflow: hidden;
        background: linear-gradient(to top, #2b0b3a, #5c1a68);
      }

      .float-item {
        position: absolute;
        bottom: -150px; /* Start below the screen */
        color: rgba(255, 255, 255, 0.15); /* Soft, ghostly white */
        font-family: "Caveat", cursive;
        animation: floatUp linear infinite;
      }

      @keyframes floatUp {
        0% {
          transform: translateY(0) translateX(0);
          opacity: 0;
        }
        10%,
        90% {
          opacity: 1;
        }
        100% {
          transform: translateY(-120vh) translateX(20px);
          opacity: 0;
        }
      }

      .float-item:nth-child(1) {
        left: 5%;
        font-size: 2rem;
        animation-duration: 25s;
        animation-delay: -5s;
      }
      .float-item:nth-child(2) {
        left: 20%;
        font-size: 3rem;
        animation-duration: 20s;
        animation-delay: -10s;
      }
      .float-item:nth-child(3) {
        left: 30%;
        font-size: 1.5rem;
        animation-duration: 35s;
        animation-delay: -2s;
      }
      .float-item:nth-child(4) {
        left: 45%;
        font-size: 4rem;
        animation-duration: 18s;
        animation-delay: -15s;
      }
      .float-item:nth-child(5) {
        left: 60%;
        font-size: 2.5rem;
        animation-duration: 30s;
        animation-delay: 0s;
      }
      .float-item:nth-child(6) {
        left: 75%;
        font-size: 2rem;
        animation-duration: 22s;
        animation-delay: -8s;
      }
      .float-item:nth-child(7) {
        left: 85%;
        font-size: 3.5rem;
        animation-duration: 28s;
        animation-delay: -18s;
      }
      .float-item:nth-child(8) {
        left: 15%;
        font-size: 2.2rem;
        animation-duration: 40s;
        animation-delay: -25s;
      }
      .float-item:nth-child(9) {
        left: 50%;
        font-size: 1.8rem;
        animation-duration: 26s;
        animation-delay: -3s;
      }
      .float-item:nth-child(10) {
        left: 90%;
        font-size: 3rem;
        animation-duration: 19s;
        animation-delay: -12s;
      }

      /* --- Music Control Button --- */
      #music-button {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 9999; /* On top of everything */
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.3);
        color: white;
        padding: 20px 40px;
        border-radius: 50px;
        cursor: pointer;
        font-size: 1.2rem;
        backdrop-filter: blur(10px);
        transition: opacity 0.5s ease-out, transform 0.5s ease-out;
        opacity: 1;
      }

      #music-button.hidden {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.8);
        pointer-events: none;
      }

      #canvas-container {
        position: relative;
        width: 100%;
        height: 100%;
        z-index: 1;
      }

      .card {
        position: absolute;
        width: var(--card-width);
        height: var(--card-height);
        background-color: #fff;
        padding: 15px 15px 50px 15px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        border-radius: 4px;
        box-sizing: border-box;
        cursor: grab;
        will-change: transform, top, left;
        transition: transform 0.2s ease-out, box-shadow 0.2s ease;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }

      .card:active {
        cursor: grabbing;
      }
      .card.is-dragging {
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        transition: none;
      }
      .card img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        background-color: #f0f0f0;
        pointer-events: none;
      }

      .caption {
        position: absolute;
        bottom: 5px;
        left: 0;
        width: 100%;
        text-align: center;
        font-family: "Caveat", cursive;
        font-size: 1.6rem;
        color: #444;
        pointer-events: none;
      }

      .card.note {
        display: flex;
        justify-content: center;
        align-items: center;
        background: #fffbf0;
        padding: 30px;
      }
      .card.note .caption {
        position: relative;
        bottom: auto;
        font-size: 2rem;
        line-height: 1.4;
      }

      #instructions {
        position: absolute;
        bottom: 100px;
        width: 100%;
        text-align: center;
        color: rgba(255, 255, 255, 0.7);
        font-size: 2rem;
        pointer-events: none;
        animation: fadeOut 5s forwards 3s;
        z-index: 2;
      }

      @keyframes fadeOut {
        to {
          opacity: 0;
        }
      }
    </style>
  </head>
  <body>
    <!-- ADD YOUR SONG HERE. It will autoplay (muted) and loop. -->
    <audio id="background-music" src="our-song.mp3" autoplay muted loop></audio>

    <div class="animated-background">
      <div class="float-item">❤️</div>
      <div class="float-item">Love</div>
      <div class="float-item">You & Me</div>
      <div class="float-item">❤️</div>
      <div class="float-item">Forever</div>
      <div class="float-item">Always</div>
      <div class="float-item">❤️</div>
      <div class="float-item">My Love</div>
      <div class="float-item">❤️</div>
      <div class="float-item">Adore</div>
    </div>

    <button id="music-button">Click to Play Music</button>

    <div id="canvas-container">
      <!-- Photo Cards and Note -->
      <div class="card note">
        <div class="caption">Our beautiful,<br />messy story.<br />❤️</div>
      </div>
      <div class="card">
        <img src="images/photo1.jpg" alt="Memory" />
        <div class="caption">That smile changes my day.</div>
      </div>
      <div class="card">
        <img src="images/photo2.jpg" alt="Memory" />
        <div class="caption">Your eyes stole all my words away.</div>
      </div>
      <div class="card">
        <img src="images/photo3.jpg" alt="Memory" />
        <div class="caption">I love you more found a way to say.</div>
      </div>
      <div class="card">
        <img src="images/photo4.jpg" alt="Memory" />
        <div class="caption">My favorite adventure.</div>
      </div>
      <div class="card">
        <img src="images/photo5.jpg" alt="Memory" />
        <div class="caption">I love you more every day.</div>
      </div>
      <div class="card">
        <img src="images/photo6.jpg" alt="Memory" />
        <div class="caption">Tradition and devotion.</div>
      </div>
      <div class="card">
        <img src="images/photo7.jpg" alt="Memory" />
        <div class="caption">Better together.</div>
      </div>
    </div>

    <div id="instructions">Touch and drag to arrange our memories</div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const musicButton = document.getElementById("music-button");
        const backgroundMusic = document.getElementById("background-music");

        // --- Music Control Logic ---
        musicButton.addEventListener("click", () => {
          // Unmute and ensure the music is playing
          backgroundMusic.muted = false;
          backgroundMusic.play();

          // Hide the button with a fade-out effect
          musicButton.classList.add("hidden");
        });

        // --- Card Dragging Logic (Identical to before) ---
        const container = document.getElementById("canvas-container");
        const cards = document.querySelectorAll(".card");

        let currentMaxZ = cards.length + 1;
        let activeCard = null;
        let startX = 0,
          startY = 0;
        let initialLeft = 0,
          initialTop = 0;

        cards.forEach((card, index) => {
          card.style.zIndex = index + 1;
          const randomRot = Math.random() * 10 - 5;
          card.style.transform = `translate(-50%, -50%) rotate(${randomRot}deg)`;
          card.style.left = "50%";
          card.style.top = "50%";
        });

        function startDrag(e) {
          const target = e.target.closest(".card");
          if (!target) return;
          activeCard = target;
          e.preventDefault();

          currentMaxZ++;
          activeCard.style.zIndex = currentMaxZ;
          activeCard.classList.add("is-dragging");

          const event = e.type.startsWith("touch") ? e.touches[0] : e;
          startX = event.clientX;
          startY = event.clientY;

          const style = window.getComputedStyle(activeCard);
          initialLeft = parseFloat(style.left);
          initialTop = parseFloat(style.top);

          const rect = activeCard.getBoundingClientRect();
          const grabX = event.clientX - rect.left;
          const tilt = grabX > rect.width / 2 ? 3 : -3;
          activeCard.dataset.tilt = tilt;

          document.addEventListener("mousemove", doDrag);
          document.addEventListener("touchmove", doDrag, { passive: false });
          document.addEventListener("mouseup", endDrag);
          document.addEventListener("touchend", endDrag);
        }

        function doDrag(e) {
          if (!activeCard) return;
          e.preventDefault();

          const event = e.type.startsWith("touch") ? e.touches[0] : e;
          const dx = event.clientX - startX;
          const dy = event.clientY - startY;

          activeCard.style.left = `${initialLeft + dx}px`;
          activeCard.style.top = `${initialTop + dy}px`;

          activeCard.style.transform = `translate(-50%, -50%) rotate(${activeCard.dataset.tilt}deg) scale(1.02)`;
        }

        function endDrag() {
          if (!activeCard) return;
          activeCard.classList.remove("is-dragging");

          const randomSettledRot = Math.random() * 6 - 3;
          activeCard.style.transform = `translate(-50%, -50%) rotate(${randomSettledRot}deg)`;

          activeCard = null;
          document.removeEventListener("mousemove", doDrag);
          document.removeEventListener("touchmove", doDrag);
          document.removeEventListener("mouseup", endDrag);
          document.removeEventListener("touchend", endDrag);
        }

        container.addEventListener("mousedown", startDrag);
        container.addEventListener("touchstart", startDrag, { passive: false });
      });
    </script>
  </body>
</html>
